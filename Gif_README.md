


# OpenFOAM åå¤„ç†åŠ¨ç”»ç”Ÿæˆå·¥å…·

![Python](https://img.shields.io/badge/Python-3.7%2B-blue)
![OpenFOAM](https://img.shields.io/badge/OpenFOAM-v7%2B-orange)
![License](https://img.shields.io/badge/License-MIT-green)

æœ¬å·¥å…·ç”¨äºå¤„ç†OpenFOAMæ¡ˆä¾‹ç”Ÿæˆçš„æ—¶åºå›¾åƒï¼Œè‡ªåŠ¨ç§»é™¤ç™½è‰²èƒŒæ™¯å¹¶ç”Ÿæˆé«˜è´¨é‡é€æ˜GIFåŠ¨ç”»ã€‚ç‰¹åˆ«é€‚ç”¨äºå±•ç¤ºå¤šç›¸æµã€ç²’å­è¿åŠ¨ç­‰ç¬æ€æ¨¡æ‹Ÿç»“æœã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ æ™ºèƒ½èƒŒæ™¯å¤„ç†
  - è‡ªåŠ¨è¯†åˆ«å¹¶ç§»é™¤ç™½è‰²èƒŒæ™¯ï¼ˆRGB > 200ï¼‰
  - æ”¯æŒä¿ç•™é˜´å½±å’ŒåŠé€æ˜åŒºåŸŸ
  - è‡ªåŠ¨è£å‰ªæœ‰æ•ˆåŒºåŸŸä¼˜åŒ–å›¾åƒå°ºå¯¸

- âš¡ æ‰¹é‡å¤„ç†
  - æ”¯æŒå¤šçº¿ç¨‹å¤„ç†ï¼ˆéœ€è‡ªå®šä¹‰å®ç°ï¼‰
  - è‡ªåŠ¨éå†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰TIFFæ–‡ä»¶
  - ä¿ç•™åŸå§‹æ–‡ä»¶åç»“æ„

- ğŸï¸ åŠ¨ç”»ç”Ÿæˆ
  - æ™ºèƒ½å¸§æ’åºï¼ˆæ”¯æŒä»»æ„å‰ç¼€+å››ä½åºå·æ ¼å¼ï¼‰
  - å¯è°ƒåŠ¨ç”»å‚æ•°ï¼ˆå¸§ç‡/å¾ªç¯æ¬¡æ•°ï¼‰
  - é€æ˜èƒŒæ™¯ä¼˜åŒ–å¤„ç†

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
pip install Pillow
```

## ğŸ› ï¸ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬å‚æ•°

| å‚æ•°            | ç±»å‹   | é»˜è®¤å€¼       | è¯´æ˜                          |
|-----------------|--------|--------------|-----------------------------|
| input_folder    | str    | å¿…éœ€         | åŸå§‹å›¾åƒå­˜å‚¨è·¯å¾„              |
| output_folder   | str    | å¿…éœ€         | å¤„ç†åå›¾åƒå­˜å‚¨è·¯å¾„            |
| gif_output      | str    | å¿…éœ€         | æœ€ç»ˆç”Ÿæˆçš„GIFæ–‡ä»¶è·¯å¾„         |
| duration        | int    | 100 (ms)    | å¸§é—´éš”æ—¶é—´                    |
| loop            | int    | 0 (æ— é™å¾ªç¯) | åŠ¨ç”»å¾ªç¯æ¬¡æ•°                  |

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
python animation_generator.py \
    --input /path/to/raw_images \
    --output /path/to/processed \
    --gif /path/to/output.gif \
    --duration 150 \
    --loop 3
```

### å‡½æ•°è°ƒç”¨

```python
from foam_animation import batch_process_images

batch_process_images(
    input_folder="/path/to/raw_images",
    output_folder="/path/to/processed",
    gif_output="/path/to/output.gif",
    duration=150,
    loop=3
)
```

## ğŸ“ æ–‡ä»¶å‘½åè§„èŒƒ

ç¤ºä¾‹æ–‡ä»¶ç»“æ„ï¼š
```
input_folder/
â”œâ”€â”€ case_001.0001.tif
â”œâ”€â”€ case_001.0002.tif
â”œâ”€â”€ ...
â””â”€â”€ case_001.0120.tif
```

å‘½åè¦æ±‚ï¼š
- å¿…é¡»åŒ…å«å››ä½åºå·æ®µï¼ˆ`.XXXX.`ï¼‰
- æ”¯æŒä»»æ„å‰ç¼€å’Œåç¼€
- æ‰©å±•åä¸åŒºåˆ†å¤§å°å†™ï¼ˆ.tif/.TIFFå‡å¯ï¼‰

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å›¾åƒé¢„å¤„ç†**
   - å»ºè®®åŸå§‹å›¾åƒåˆ†è¾¨ç‡ä¸è¶…è¿‡4096Ã—4096
   - ç¡®ä¿ç™½è‰²èƒŒæ™¯ä¸ºçº¯ç™½ï¼ˆRGB=255,255,255ï¼‰
   - æ¨èä½¿ç”¨ParaViewå¯¼å‡ºé€æ˜èƒŒæ™¯çš„TIFFåºåˆ—

2. **æ€§èƒ½ä¼˜åŒ–**
   - 1000å¸§ä»¥ä¸Šå»ºè®®åˆ†æ‰¹æ¬¡å¤„ç†
   - å¯é€šè¿‡è°ƒæ•´`colors=127`é™ä½GIFè°ƒè‰²æ¿å¤§å°
   - å¤„ç†è¶…å¤§æ•°æ®é›†æ—¶æ·»åŠ å†…å­˜ä¼˜åŒ–ï¼š
     ```python
     Image.MAX_IMAGE_PIXELS = None  # è§£é™¤å¤§å›¾é™åˆ¶
     ```

3. **é«˜çº§å®šåˆ¶**
   - ä¿®æ”¹èƒŒæ™¯é˜ˆå€¼ï¼ˆç¬¬18è¡Œï¼‰ï¼š
     ```python
     if item[0] > threshold and item[1] > threshold and item[2] > threshold:
     ```
   - æ·»åŠ è¿›åº¦æ¡ï¼ˆéœ€å®‰è£…tqdmï¼‰ï¼š
     ```python
     from tqdm import tqdm
     for filename in tqdm(os.listdir(input_folder)):
     ```

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE) Â© 2024 Your Name

---



